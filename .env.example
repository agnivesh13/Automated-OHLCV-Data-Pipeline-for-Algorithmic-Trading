# =================================================================
# Environment Configuration File for Stock Price Feed Parser MVP
# =================================================================
# Copy this file to .env and update the values with your actual configuration
# IMPORTANT: Never commit this file to version control - it's in .gitignore

# =================================================================
# AWS CONFIGURATION
# =================================================================

# AWS Region where your resources are deployed
AWS_DEFAULT_REGION=ap-south-1

# AWS Credentials (Alternative to AWS CLI configuration)
# Uncomment and use these if you're not using AWS CLI or IAM roles
# AWS_ACCESS_KEY_ID=your_access_key_here
# AWS_SECRET_ACCESS_KEY=your_secret_key_here

# =================================================================
# DEPLOYMENT CONFIGURATION
# =================================================================

# Your email address for notifications and alerts
NOTIFICATION_EMAIL=23071a66c5@vnrvjiet.in

# Project name (used as prefix for AWS resources)
PROJECT_NAME=stock-pipeline

# Environment (dev, staging, prod)
ENVIRONMENT=dev

# =================================================================
# AWS RESOURCE NAMES (Auto-generated after deployment)
# =================================================================

# S3 Bucket name for storing OHLCV data
# This will be generated during deployment like: stock-pipeline-dev-ohlcv-abc123
S3_BUCKET_NAME=

# SNS Topic ARN for notifications
# Format: arn:aws:sns:region:account:topic-name
SNS_TOPIC_ARN=

# Secrets Manager secret name for Fyers API credentials
# Format: stock-pipeline-fyers-credentials
FYERS_SECRET_NAME=

# Lambda function name
# Format: stock-pipeline-ingestion
LAMBDA_FUNCTION_NAME=

# =================================================================
# FYERS API CONFIGURATION
# =================================================================

# Fyers API Base URL (usually doesn't change)
FYERS_API_BASE_URL=https://api-t1.fyers.in/data-rest/v3

# NOTE: Actual API credentials are stored in AWS Secrets Manager for security
# You should NOT put your actual API keys in this file
# Instead, configure them in AWS Secrets Manager after deployment

# =================================================================
# DATA COLLECTION SETTINGS
# =================================================================

# Data collection frequency (for EventBridge rule)
# Options: rate(5 minutes), rate(15 minutes), rate(30 minutes), rate(1 hour)
INGESTION_SCHEDULE=rate(15 minutes)

# Number of stocks to track (MVP default: 10)
MAX_SYMBOLS=10

# Data resolution (in minutes)
# Options: 1, 5, 15, 30, 60, 240, D (daily)
DATA_RESOLUTION=15

# =================================================================
# COST CONTROL SETTINGS
# =================================================================

# Monthly budget limit in USD
MONTHLY_BUDGET_LIMIT=5

# Budget alert thresholds (as percentages)
BUDGET_ALERT_THRESHOLD_1=50
BUDGET_ALERT_THRESHOLD_2=80

# =================================================================
# ANALYSIS CONFIGURATION
# =================================================================

# Days of historical data to analyze
ANALYSIS_DAYS_BACK=7

# Output directory for analysis results
ANALYSIS_OUTPUT_DIR=./analysis_output

# Chart generation settings
CHART_DPI=300
CHART_STYLE=default

# =================================================================
# MONITORING SETTINGS
# =================================================================

# CloudWatch log retention (in days)
LOG_RETENTION_DAYS=7

# Enable detailed monitoring (true/false)
ENABLE_DETAILED_MONITORING=false

# Enable cost monitoring alerts (true/false)
ENABLE_COST_ALERTS=true

# =================================================================
# DEVELOPMENT/TESTING SETTINGS
# =================================================================

# Enable debug mode (true/false)
DEBUG_MODE=false

# Mock API responses for testing (true/false)
MOCK_API_RESPONSES=false

# Test mode - reduces API calls for development (true/false)
TEST_MODE=false

# =================================================================
# BACKUP AND RETENTION SETTINGS
# =================================================================

# S3 data retention period (in days)
# Raw data will be moved to cheaper storage classes after this period
S3_DATA_RETENTION_DAYS=90

# Backup frequency for important data
BACKUP_FREQUENCY=weekly

# =================================================================
# PERFORMANCE TUNING
# =================================================================

# Lambda function timeout (in seconds, max 900)
LAMBDA_TIMEOUT=300

# Lambda memory allocation (in MB, must be multiple of 64)
LAMBDA_MEMORY=512

# Rate limiting delay between API calls (in seconds)
API_RATE_LIMIT_DELAY=2

# =================================================================
# SCALING CONFIGURATION (For future use)
# =================================================================

# RDS instance class (when RDS is enabled)
RDS_INSTANCE_CLASS=db.t3.micro

# ECS task CPU and memory (when ECS is enabled)
ECS_CPU=1024
ECS_MEMORY=2048

# Glue worker configuration (when Glue is enabled)
GLUE_WORKER_TYPE=G.1X
GLUE_NUMBER_OF_WORKERS=3

# =================================================================
# SECURITY SETTINGS
# =================================================================

# Enable encryption at rest (true/false)
ENABLE_ENCRYPTION=true

# VPC CIDR block (when VPC is created)
VPC_CIDR=10.0.0.0/16

# =================================================================
# EXAMPLE COMPLETED CONFIGURATION
# =================================================================
# Here's how your .env file might look after deployment:
#
# AWS_DEFAULT_REGION=ap-south-1
# NOTIFICATION_EMAIL=john.doe@example.com
# PROJECT_NAME=stock-pipeline
# ENVIRONMENT=dev
# S3_BUCKET_NAME=stock-pipeline-dev-ohlcv-a1b2c3
# SNS_TOPIC_ARN=arn:aws:sns:ap-south-1:123456789012:stock-pipeline-alerts
# FYERS_ACCESS_TOKEN_PARAM=/stock-pipeline/fyers/access_token
# FYERS_REFRESH_TOKEN_PARAM=/stock-pipeline/fyers/refresh_token
# FYERS_CLIENT_ID_PARAM=/stock-pipeline/fyers/client_id
# LAMBDA_FUNCTION_NAME=stock-pipeline-ingestion
# MONTHLY_BUDGET_LIMIT=5
# INGESTION_SCHEDULE=rate(15 minutes)
# MAX_SYMBOLS=10
# DATA_RESOLUTION=15

# =================================================================
# SETUP INSTRUCTIONS
# =================================================================
# 1. Copy this file to .env: cp .env.example .env
# 2. Update NOTIFICATION_EMAIL with your email address
# 3. Run deployment: ./deployment/deploy-mvp.sh (or .ps1 for Windows)
# 4. After deployment, update the AWS resource names in this file
# 5. Configure Fyers API credentials in AWS SSM Parameter Store:
#    aws ssm put-parameter --name "/stock-pipeline/fyers/access_token" --value "your-token" --type "SecureString" --overwrite
#    aws ssm put-parameter --name "/stock-pipeline/fyers/refresh_token" --value "your-token" --type "SecureString" --overwrite
#    aws ssm put-parameter --name "/stock-pipeline/fyers/client_id" --value "your-client-id" --type "SecureString" --overwrite
# 6. Test your setup: python scripts/pre_deployment_check.py

# =================================================================
# TROUBLESHOOTING
# =================================================================
# If you encounter issues:
# 1. Verify all required variables are set
# 2. Check AWS credentials: aws sts get-caller-identity
# 3. Validate resource names in AWS Console
# 4. Check CloudWatch logs for Lambda execution details
# 5. Review AWS billing for unexpected charges
